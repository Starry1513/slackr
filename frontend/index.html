<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      http-equiv="X-UA-Compatible"
      content="IE=edge" />
    <title>Slackr</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="styles/auth.css" />
      <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="styles/channel.css" />
      <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="styles/notification.css" />
  </head>

  <body>
    <header class="banner">
      <h1>Slackr</h1>
      <div id="offline-indicator" style="display: none;">
        <span>üì° Offline Mode</span>
      </div>
    </header>
    <main role="main">
      <!-- In-App Notification Banner -->
      <div id="notification-banner-container" style="display: none;">
        <!-- Template for notification banner (will be cloned) -->
        <div id="notification-banner-template" class="notification-banner" style="display: none;">
          <div class="notification-banner-icon">
            <img class="notification-banner-avatar" src="" alt="" style="display: none;">
            <span class="notification-banner-emoji">üí¨</span>
          </div>
          <div class="notification-banner-content">
            <div class="notification-banner-title"></div>
            <div class="notification-banner-message"></div>
          </div>
          <button class="notification-banner-close" aria-label="Close notification">√ó</button>
        </div>
      </div>

      <!-- Error Popup -->
      <div
        id="error-body"
        class="error-popup-overlay"
        style="display: none">
        <div class="error-popup-content">
          <h3>Error</h3>
          <p id="error-message">Error message will appear here</p>
          <button id="error-close">Close</button>
        </div>
      </div>

      <!-- Login Form -->
      <div
        id="login-container"
        class="auth-container">
        <h2>Login to Slackr</h2>
        <form
          id="login-form"
          class="auth-form">
          <label for="login-email">Email:</label>
          <input
            type="text"
            id="login-email"
            placeholder="Enter your email"
            required />

          <label for="login-password">Password:</label>
          <input
            type="password"
            id="login-password"
            placeholder="Enter your password"
            required />

          <button
            type="submit"
            id="login-submit"
            >Login</button
          >
        </form>

        <button
          type="button"
          id="register-link"
          class="link-button">
          Don't have an account yet? Register here
        </button>
      </div>

      <!-- Register -->
      <div
        id="register-container"
        class="auth-container"
        style="display: none">
        <h2>Register for Slackr</h2>
        <form
          id="register-form"
          class="auth-form">
          <label for="register-email">Email:</label>
          <input
            type="text"
            id="register-email"
            placeholder="Enter your email"
            required />

          <label for="register-name">Name:</label>
          <input
            type="text"
            id="register-name"
            placeholder="Enter your name"
            required />

          <label for="register-password">Password:</label>
          <input
            type="password"
            id="register-password"
            placeholder="Enter your password"
            required />

          <label for="register-password-confirm">Confirm Password:</label>
          <input
            type="password"
            id="register-password-confirm"
            placeholder="Confirm your password"
            required />

          <button
            type="submit"
            id="register-submit"
            >Register</button
          >
        </form>

        <button
          type="button"
          id="login-link"
          class="link-button">
          Already have an account? Login here
        </button>
      </div>

      <!-- Dashboard -->
      <div
        id="dashboard-container"
        class="dashboard"
        style="display: none">
        <!-- Sidebar Backdrop (for mobile) -->
        <div id="sidebar-backdrop" class="sidebar-backdrop"></div>

        <!-- Sidebar -->
        <aside id="dashboard-sidebar" class="dashboard-sidebar">
          <div class="sidebar-header">
            <h2>Slackr</h2>
            <div class="header-buttons">
              <button id="profile-button" class="icon-button" title="Edit Profile">üë§</button>
              <button id="logout-button">Logout</button>
            </div>
          </div>

          <div class="channels-section">
            <div class="channels-header">
              <h3>Channels</h3>
              <button id="create-channel-button" class="icon-button">+</button>
            </div>
            <div id="channel-list"></div>
          </div>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
          <!-- Welcome Screen -->
          <div id="welcome-screen" class="welcome-screen">
            <h2>Welcome to Slackr!</h2>
            <p>Select a channel from the sidebar to get started.</p>
          </div>

          <!-- Channel View -->
          <div id="channel-view" class="channel-view" style="display: none;">
            <!-- Channel Header -->
            <div class="channel-header">
              <button id="sidebar-toggle" class="icon-button sidebar-toggle-btn" title="Toggle Sidebar">‚ò∞</button>
              <h2 id="channel-name">Channel Name</h2>
              <div class="channel-header-buttons">
                <button id="view-pinned-messages-button" class="icon-button" title="View Pinned Messages">üìå</button>
                <button id="channel-details-toggle" class="icon-button" title="Channel Details">‚ÑπÔ∏è</button>
              </div>
            </div>

            <!-- Channel Messages -->
            <div class="channel-messages" id="channel-messages">
              <!-- Messages will be rendered here -->
            </div>

            <!-- Message Input -->
            <div class="message-input-container">
              <form id="message-form">
                <label for="message-image-input" class="image-upload-btn" title="Upload image">üì∑</label>
                <input
                  type="file"
                  id="message-image-input"
                  accept="image/*"
                  style="display: none;"
                />

                <input
                  type="text"
                  id="message-input"
                  placeholder="Type a message..."
                  autocomplete="off"
                />
                <button type="submit" id="message-send-button">Send</button>
              </form>
            </div>
          </div>
        </main>

        <!-- Channel Details Backdrop -->
        <div id="channel-details-backdrop" class="channel-details-backdrop"></div>

        <!-- Channel Details Sidebar -->
        <aside id="channel-details-container" class="channel-details">
          <div class="details-header">
            <h3>Channel Details</h3>
            <button id="channel-details-close" class="icon-button">√ó</button>
          </div>

          <div class="details-content">
            <div class="detail-item">
              <label>Name:</label>
              <p id="channel-detail-name"></p>
            </div>

            <div class="detail-item">
              <label>Description:</label>
              <p id="channel-detail-description"></p>
            </div>

            <div class="detail-item">
              <label>Type:</label>
              <p id="channel-detail-type"></p>
            </div>

            <div class="detail-item">
              <label>Created:</label>
              <p id="channel-detail-created"></p>
            </div>

            <div class="detail-item">
              <label>Creator:</label>
              <p id="channel-detail-creator"></p>
            </div>
          </div>

          <div class="details-actions">
            <button id="edit-channel-button" class="action-button">Edit Channel</button>
            <button id="join-channel-button" class="action-button">Join Channel</button>
            <button id="leave-channel-button" class="action-button danger">Leave Channel</button>
            <button id="invite-user-button" class="action-button">Invite User</button>
          </div>
        </aside>
      </div>

      <!-- Create Channel Modal -->
      <div id="create-channel-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Create Channel</h3>
            <button id="create-channel-close" class="close-button">√ó</button>
          </div>

          <form id="create-channel-form">
            <label for="create-channel-name">Channel Name:</label>
            <input
              type="text"
              id="create-channel-name"
              placeholder="Enter channel name"
              required
            />

            <label for="create-channel-description">Description:</label>
            <textarea
              id="create-channel-description"
              placeholder="Enter channel description (optional)"
              rows="3"
            ></textarea>

            <label class="checkbox-label">
              <input type="checkbox" id="create-channel-is-private" />
              Private Channel
            </label>

            <div class="modal-actions">
              <button type="button" id="create-channel-cancel" class="button-secondary">Cancel</button>
              <button type="submit" class="button-primary">Create</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Edit Channel Modal -->
      <div id="edit-channel-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Edit Channel</h3>
            <button id="edit-channel-close" class="close-button">√ó</button>
          </div>

          <form id="edit-channel-form">
            <label for="edit-channel-name">Channel Name:</label>
            <input
              type="text"
              id="edit-channel-name"
              placeholder="Enter channel name"
              required
            />

            <label for="edit-channel-description">Description:</label>
            <textarea
              id="edit-channel-description"
              placeholder="Enter channel description (optional)"
              rows="3"
            ></textarea>

            <div class="modal-actions">
              <button type="button" id="edit-channel-cancel" class="button-secondary">Cancel</button>
              <button type="submit" class="button-primary">Save</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Invite User Modal -->
      <div id="channel-invite-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Invite Users to Channel</h3>
            <button id="invite-user-close" class="close-button">√ó</button>
          </div>

          <form id="invite-user-form">
            <div class="invite-user-list" id="invite-user-list">
              <!-- User list will be rendered here -->
            </div>

            <div class="modal-actions">
              <button type="button" id="invite-user-cancel" class="button-secondary">Cancel</button>
              <button type="submit" id="invite-submit-button" class="button-primary">Invite Selected</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Profile Modal -->
      <div id="profile-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Edit Profile</h3>
            <button id="profile-close" class="close-button">√ó</button>
          </div>

          <form id="profile-form">
            <label for="profile-email">Email:</label>
            <input
              type="email"
              id="profile-email"
              placeholder="Enter your email"
              required
            />

            <label for="profile-name">Name:</label>
            <input
              type="text"
              id="profile-name"
              placeholder="Enter your name"
              required
            />

            <label for="profile-bio">Bio:</label>
            <textarea
              id="profile-bio"
              placeholder="Tell us about yourself"
              rows="3"
            ></textarea>

            <label for="profile-password">New Password (optional):</label>
            <input
              type="password"
              id="profile-password"
              placeholder="Leave blank to keep curr password"
            />

            <label for="profile-image">Profile Image:</label>
            <input
              type="file"
              id="profile-image"
              accept="image/*"
            />
            <div id="profile-image-preview" class="image-preview"></div>

            <div class="modal-actions">
              <button type="button" id="profile-cancel" class="button-secondary">Cancel</button>
              <button type="submit" class="button-primary">Save</button>
            </div>
          </form>
        </div>
      </div>

      <!-- View User Profile Modal -->
      <div id="view-user-profile-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>User Profile</h3>
            <button id="view-user-profile-close" class="close-button">√ó</button>
          </div>

          <div class="user-profile-content">
            <div class="user-profile-image-container">
              <img id="view-user-profile-image" alt="User profile" style="display: none;" />
            </div>

            <div class="user-profile-info">
              <div class="profile-info-item">
                <label>Name:</label>
                <p id="view-user-profile-name"></p>
              </div>

              <div class="profile-info-item">
                <label>Email:</label>
                <p id="view-user-profile-email"></p>
              </div>

              <div class="profile-info-item">
                <label>Bio:</label>
                <p id="view-user-profile-bio"></p>
              </div>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" id="view-user-profile-ok" class="button-primary">OK</button>
          </div>
        </div>
      </div>

      <!-- Pinned Messages Modal -->
      <div id="pinned-messages-container" class="modal-overlay" style="display: none;">
        <div class="modal-content pinned-messages-modal">
          <div class="modal-header">
            <h3>üìå Pinned Messages</h3>
            <button id="pinned-messages-close" class="close-button">√ó</button>
          </div>

          <div class="pinned-messages-content" id="pinned-messages-content">
            <!-- Pinned messages will be rendered here -->
          </div>
        </div>
      </div>

      <!-- Edit Message Modal -->
      <div id="edit-message-container" class="modal-overlay" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Edit Message</h3>
            <button id="edit-message-close" class="close-button">√ó</button>
          </div>

          <form id="edit-message-form">
            <label for="edit-message-text">Message:</label>
            <textarea
              id="edit-message-text"
              placeholder="Enter your message"
              rows="4"
              required
            ></textarea>

            <div class="modal-actions">
              <button type="button" id="edit-message-cancel" class="button-secondary">Cancel</button>
              <button type="submit" class="button-primary">Save</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Image Viewer Modal -->
      <div id="image-viewer-modal" class="modal-overlay" style="display: none;">
        <div class="image-viewer-content">
          <button id="image-viewer-close" class="image-viewer-close-btn">√ó</button>
          <button id="image-viewer-prev" class="image-nav-btn image-nav-prev">‚Äπ</button>
          <img id="image-viewer-image" src="" alt="Full size image" />
          <button id="image-viewer-next" class="image-nav-btn image-nav-next">‚Ä∫</button>
          <div id="image-viewer-counter" class="image-viewer-counter"></div>
        </div>
      </div>
      
    </main>

    <!-- Message Template -->
    <template id="message-template">
      <div class="message message-container" data-message-id="">
        <div class="message-header">
          <div class="message-sender-info">
            <div class="message-sender-image-container"></div>
            <span class="message-sender-name"></span>
            <span class="message-timestamp"></span>
          </div>
          <div class="message-actions" style="display: none;">
            <button class="message-action-btn pin-message-btn">üìå Pin</button>
            <button class="message-action-btn edit-message-btn">‚úèÔ∏è Edit</button>
            <button class="message-action-btn delete-message-btn">üóëÔ∏è Delete</button>
          </div>
        </div>
        <div class="message-content">
          <p class="message-text" style="display: none;"></p>
          <img class="message-image" style="display: none;" alt="Message image" />
        </div>
        <div class="message-reactions" style="display: none;"></div>
        <span class="message-pinned-badge" style="display: none;">üìå Pinned</span>
      </div>
    </template>

    <!-- Reaction Button Template -->
    <template id="reaction-btn-template">
      <button class="reaction-btn"></button>
    </template>

    <!-- Add Reaction Button Template -->
    <template id="add-reaction-btn-template">
      <button class="add-reaction-btn">‚ûï</button>
    </template>

    <!-- Empty Messages Template -->
    <template id="empty-messages-template">
      <div class="empty-messages">No messages yet. Be the first to say something!</div>
    </template>

    <!-- Join Prompt Template -->
    <template id="join-prompt-template">
      <div class="join-prompt-container">
        <div class="join-prompt-icon"></div>
        <h3 class="join-prompt-title"></h3>
        <p class="join-prompt-description"></p>
        <p class="join-prompt-message"></p>
        <button class="join-prompt-button action-button">Join Channel</button>
      </div>
    </template>

    <!-- Invite User Item Template -->
    <template id="invite-user-item-template">
      <div class="invite-user-item">
        <input type="checkbox" class="invite-member-checkbox" />
        <label class="invite-member-name"></label>
      </div>
    </template>

    <!-- Empty Invite List Template -->
    <template id="empty-invite-list-template">
      <p class="empty-invite-list">All users are already in this channel</p>
    </template>

    <!-- Empty Channel List Template -->
    <template id="empty-channel-list-template">
      <p class="empty-channel-list">No channels available</p>
    </template>

    <!-- Emoji Button Template -->
    <template id="emoji-btn-template">
      <button type="button" class="emoji-btn"></button>
    </template>

    <!-- Sender Image Template -->
    <template id="sender-image-template">
      <img class="message-sender-image" alt="User"/>
    </template>

    <!-- Sender Image Placeholder Template -->
    <template id="sender-placeholder-template">
      <div class="message-sender-image placeholder"></div>
    </template>

    <!-- Edited Span Template -->
    <template id="edited-span-template">
      <span class="message-edited"> (edited)</span>
    </template>

    <!-- Channel Item Template -->
    <template id="channel-item-template">
      <div class="channel-container" role="button" tabindex="0">
        <span class="channel-name"></span>
      </div>
    </template>

    <!-- Private Channel Item Template -->
    <template id="private-channel-item-template">
      <div class="channel-container private" role="button" tabindex="0">
        <span class="channel-lock-icon">üîí</span>
        <span class="channel-name"></span>
      </div>
    </template>

    <!-- Emoji Picker Modal -->
    <div id="emoji-picker-modal" class="emoji-picker-modal" style="display: none;">
      <div class="emoji-picker-content">
        <div class="emoji-picker-header">
          <h4>Choose a reaction</h4>
          <button id="emoji-picker-close" class="close-button">√ó</button>
        </div>
        <div class="emoji-picker-grid" id="emoji-picker-grid">
          <!-- Emojis will be populated here -->
        </div>
      </div>
    </div>

    <script
      type="module"
      src="src/main.js"></script>
  </body>
</html>
